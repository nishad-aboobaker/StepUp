<div class="dashboard-container">
  <app-sidenav></app-sidenav>
  <div class="main-section">
    <header class="dashboard-header">
      <h1>Update Product</h1>
      <p class="header-subtitle">Modify product details and save changes</p>
    </header>
    <main class="main-content">
      <div class="update-form-container" *ngIf="product">
        <div class="form-header">
          <h2>Product Information</h2>
          <div class="product-preview">
            <img
              [src]="product.thumbnail"
              alt="Product thumbnail"
              class="preview-image"
            />
            <div class="preview-info">
              <h3>{{ product.name }}</h3>
              <p class="product-id">ID: {{ product.id }}</p>
            </div>
          </div>
        </div>

        <form
          [formGroup]="productForm"
          (ngSubmit)="onSubmit()"
          class="update-form"
        >
          <div class="form-grid">
            <div class="form-group">
              <label for="name">Product Name *</label>
              <input
                type="text"
                id="name"
                formControlName="name"
                class="form-control"
                placeholder="Enter product name"
              />
              <div
                class="error-message"
                *ngIf="
                  productForm.get('name')?.invalid &&
                  productForm.get('name')?.touched
                "
              >
                Product name is required
              </div>
            </div>

            <div class="form-group">
              <label for="brand">Brand *</label>
              <input
                type="text"
                id="brand"
                formControlName="brand"
                class="form-control"
                placeholder="Enter brand name"
              />
              <div
                class="error-message"
                *ngIf="
                  productForm.get('brand')?.invalid &&
                  productForm.get('brand')?.touched
                "
              >
                Brand is required
              </div>
            </div>

            <div class="form-group">
              <label for="category">Category *</label>
              <select
                id="category"
                formControlName="category"
                class="form-control"
              >
                <option value="">Select category</option>
                <option value="men">Men</option>
                <option value="women">Women</option>
                <option value="kids">Kids</option>
                <option value="sports">Sports</option>
              </select>
              <div
                class="error-message"
                *ngIf="
                  productForm.get('category')?.invalid &&
                  productForm.get('category')?.touched
                "
              >
                Category is required
              </div>
            </div>

            <div class="form-group">
              <label for="rating">Rating *</label>
              <input
                type="number"
                id="rating"
                formControlName="rating"
                class="form-control"
                min="0"
                max="5"
                step="0.1"
                placeholder="0.0 - 5.0"
              />
              <div
                class="error-message"
                *ngIf="
                  productForm.get('rating')?.invalid &&
                  productForm.get('rating')?.touched
                "
              >
                Rating must be between 0 and 5
              </div>
            </div>

            <div class="form-group">
              <label for="price">Price (â‚¹) *</label>
              <input
                type="number"
                id="price"
                formControlName="price"
                class="form-control"
                min="0"
                step="0.01"
                placeholder="0.00"
              />
              <div
                class="error-message"
                *ngIf="
                  productForm.get('price')?.invalid &&
                  productForm.get('price')?.touched
                "
              >
                Price must be a positive number
              </div>
            </div>

            <div class="form-group">
              <label for="stock">Stock Quantity *</label>
              <input
                type="number"
                id="stock"
                formControlName="stock"
                class="form-control"
                min="0"
                placeholder="0"
              />
              <div
                class="error-message"
                *ngIf="
                  productForm.get('stock')?.invalid &&
                  productForm.get('stock')?.touched
                "
              >
                Stock must be a non-negative number
              </div>
            </div>
          </div>

          <div class="form-group full-width">
            <label for="description">Description *</label>
            <textarea
              id="description"
              formControlName="description"
              class="form-control"
              rows="4"
              placeholder="Enter product description"
            ></textarea>
            <div
              class="error-message"
              *ngIf="
                productForm.get('description')?.invalid &&
                productForm.get('description')?.touched
              "
            >
              Description is required
            </div>
          </div>

          <div class="form-group full-width">
            <label for="thumbnail">Thumbnail URL *</label>
            <input
              type="url"
              id="thumbnail"
              formControlName="thumbnail"
              class="form-control"
              placeholder="https://example.com/image.jpg"
            />
            <div
              class="error-message"
              *ngIf="
                productForm.get('thumbnail')?.invalid &&
                productForm.get('thumbnail')?.touched
              "
            >
              Valid thumbnail URL is required
            </div>
          </div>

          <div class="form-actions">
            <button
              type="submit"
              [disabled]="!productForm.valid"
              class="btn btn-primary"
            >
              <svg class="btn-icon" fill="currentColor" viewBox="0 0 20 20">
                <path
                  fill-rule="evenodd"
                  d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                  clip-rule="evenodd"
                ></path>
              </svg>
              Update Product
            </button>
            <button
              type="button"
              (click)="onCancel()"
              class="btn btn-secondary"
            >
              <svg class="btn-icon" fill="currentColor" viewBox="0 0 20 20">
                <path
                  fill-rule="evenodd"
                  d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                  clip-rule="evenodd"
                ></path>
              </svg>
              Cancel
            </button>
          </div>
        </form>
      </div>

      <div class="loading-container" *ngIf="!product">
        <div class="loading-spinner"></div>
        <p>Loading product details...</p>
      </div>
    </main>
  </div>
</div>
